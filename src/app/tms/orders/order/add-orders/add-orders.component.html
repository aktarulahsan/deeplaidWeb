
<div class="modal-content modal-xl">
    <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">
            অ্যাড অর্ডার
        </h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="bsModalRef.hide()">
            <span>&times;</span>
        </button>
    </div>

    <div class="modal-body crudForm" id="pdfTable" #pdfTable>
        <div class="persoanlInfoArea">

          

                <div class="row">
         
                    
                    <div class="col-sm-4 form-group">
                        <label for="groupName">কাস্টমার মোবাইল   </label>
                        <span></span><span></span>
                        <label for="groupName"><span>
                            <button class="btn"><i class="fa fa-plus" data-toggle="modal" data-target="#myModal"></i></button>    
                            <!-- <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">
                                Open modal
                              </button> -->
                        </span></label>
                        <ng-select
                        [loading]="loading"
                        [dropdownPosition]="'bottom'"
                        [items]="customerList" 
                        
                            onselect="true"
                            [clearable]="true"
                        placeholder="Choose customer code"
                        notFoundText="Product code not found" 
                        bindLabel="mobile" 
                        [searchable]="true"
                        bindValue="customerCode" 
                        [(ngModel)]= "customerCode"
                        name="customerCode"
                        (change)="selectCustomer($event)"
                        onselect="true" required>
                        <!-- <ng-option>{{customerCode + ' ' + customerName}}</ng-option> -->
                        <!-- <ng-template ng-label-tmp let-item="item" let-clear="clear">
                            <span class="ng-value-label">{{item.customerCode + ' ' + item.customerName}}</span>
                            <span class="ng-value-icon right" >×</span>
                        </ng-template> -->
                        
                        </ng-select>



                        <!-- <ng-select    bindLabel="customerName" placeholder="Select item" appendTo="body" 
                            [searchable]="true"  [clearable]="true"  [(ngModel)]="customerCode" [ngModelOptions]="{standalone: true}">
                            <ng-option [value]="item.customerCode" [disabled]="item.customerCode" (change)="selectCustomer($event)"
                                *ngFor="let item of customerList">

                                {{item.customerCode}}
                            </ng-option>
                            </ng-select> -->


                    </div>


                    <div class="form-group col-md-4 ">
                        <label for="productName">কাস্টমার নাম </label>
                        <input type="text" class="form-control" bindLabel="customer.customerName" [(ngModel)]="customer.customerName" name="customerName" />
                        <!-- <div *ngIf="f.submitted && productName.invalid">
                  <div *ngIf="productName.errors.required">
                      productName is required
                  </div>
                </div> -->
                    </div>
                    <div class="form-group col-md-4">
                        <label for="productName">কারিগরি </label>
                        <input type="text" class="form-control" bindLabel="worker" [(ngModel)]="worker" name="worker" />
                        <!-- <input type="text" class="form-control" bindLabel=" "   name="mobile" /> -->
                        <!-- <div *ngIf="f.submitted && productName.invalid">
                  <div *ngIf="productName.errors.required">
                      productName is required
                  </div>
                </div> -->
                    </div>

                </div>
                <div class="row">

                    <div class="form-group col-md-6 ">
                        <label for="purchaseRate">ঠিকানা </label>

                        <textarea class="form-control" rows="2" id="comment" bindLabel="customer.address" [(ngModel)]="customer.address"  name="address"></textarea>

                    </div>
                    <div class="form-group col-md-2">
                        <label for="productName">অগ্রিম টাকা </label>
                        <input type="text"  [(ngModel)]="orderModel.adAmunt"  class="form-control"  name="adAmunt" />
                    </div>
                    <div class="form-group col-md-4">
                        <label for="qty">অর্ডার ডেট </label>

                        <input type="text" 
                        class="form-control datePicker" 
                        placeholder="Select Date (DD/MM/YYYY)"      
                        bsDatepicker
                        autocomplete="off"
                        [(ngModel)]="fDate"
                        #dp="bsDatepicker"
                        [bsConfig]="{ dateInputFormat: 'DD/MM/YYYY' }"
                        
                        name="fDate"                                
                        required/>
                        <!-- <input type="date" class="form-control" max="maxDate" name="orderDate" required /> -->
                        <!-- <div *ngIf="f.submitted && qty.invalid">
                  <div *ngIf="qty.errors.required">
                    qty Id is required
                  </div>
                </div> -->
                    </div>
                </div>


                <div class="row">


                    <!-- <div class="form-group col-md-4 ">
                        <label for="productName">অর্ডার নাম্বার </label>
                        <input type="text" class="form-control" name="productName" [(ngModel)]="orderid" bindLabel="orderid" readonly />
                  
                    </div> -->
                    <div class="col-md-4 col-sm- genDiv genderTitle">
                        <label for="" class="col-md-8 col-sm-10 control-label text-right paddingLeft0">পোশাক টাইপ &nbsp;*&nbsp;:</label>
                        <div [ngClass]="{'invalid-input':f.submitted && gender.invalid}">
                         
                          <!-- <input name="type" [(ngModel)]="drestype" type="radio" [value]="1"  /> শার্ট
                          <input name="type" [(ngModel)]="drestype" type="radio" [value]="0"  /> প্যান্ট -->
                          <label class="radio-inline col-md-5 p-1 col-sm-12 fontWn">
                            <input name="drestype" [(ngModel)]="drestype" type="radio" [value]="0"  />
                                   <span>&nbsp;&nbsp;শার্ট</span>
                                  </label>
                          <label class="radio-inline col-md-5 p-1 col-sm-8 fontWn">
                            <input name="drestype" [(ngModel)]="drestype" type="radio" [value]="1"  />
                                   <span>&nbsp;&nbsp;প্যান্ট</span>
                                  </label>
                           </div>
                      </div>

                    <div class="col-sm-4 form-group">
                        <label for="groupName">পোশাকের নাম </label>

                        <ng-select [items]="catList" 
                        placeholder="Choose product code"
                        notFoundText="Product code not found" 
                        bindLabel="cname" 
                        bindValue="categoryId" 
                        name="categoryId"
                        (change)="selectCategory($event)"
                        onselect="true" required>
                        </ng-select>
                    </div>


                    <div class="col-sm-4 form-group">
                        <label for="groupName">পোশাকের মডেল </label>

                        <ng-select [items]="subcatList" placeholder="Choose product code"
                            notFoundText="Product code not found" bindLabel="itemName" [(ngModel)]="itemId" bindValue="itemId" name="itemId"
                            (change)="selectL1Item($event)" onselect="true" required>
                        </ng-select>
                    </div>
           

                </div>
            <form class="form-horizontal form-signin" (ngSubmit)="f.form.valid && onSaveOrUpdate(f)" #f="ngForm" novalidate action="index.html">
           
                <div *ngIf="drestype == 0" class="row bg-light">
                    

                    <div class="col-sm-2 form-group">
                        <label for="groupName">লম্বা  </label>
                        <input type="text" class="form-control"maxlength=5 name=lomba [(ngModel)]="orderDetailsModels.lomba">
                         
                    </div>
                    <div class="col-sm-2 form-group">
                        <label for="groupName">বুক </label>
                        <input type="text" class="form-control"maxlength=5 name=buk [(ngModel)]="orderDetailsModels.buk">
                         
                    </div>
                    <div class="col-sm-2 form-group">
                        <label for="groupName">পেট </label>
                        <input type="text" class="form-control"maxlength=5 name=pet [(ngModel)]="orderDetailsModels.pet">
                         
                    </div>
                    <div class="col-sm-2 form-group">
                        <label for="groupName">হিপ </label>
                        <input type="text" class="form-control"maxlength=5 name=hip [(ngModel)]="orderDetailsModels.hip">
                         
                    </div>
                    <div class="col-sm-2 form-group">
                        <label for="groupName">কাধ  </label>
                        <input type="text" class="form-control"maxlength=5 name=kad [(ngModel)]="orderDetailsModels.kad">
                         
                    </div>
                    <div class="col-sm-2 form-group">
                        <label for="groupName">হাত</label>
                        <input type="text" class="form-control"maxlength=5 name=hata [(ngModel)]="orderDetailsModels.hata">
                         
                    </div>
                    <div class="col-sm-2 form-group">
                        <label for="groupName">গলা </label>
                        <input type="text" class="form-control"maxlength=5 name=gola [(ngModel)]="orderDetailsModels.gola">
                         
                    </div>
                    <div class="col-sm-2 form-group">
                        <label for="groupName">কাফ </label>
                        <input type="text" class="form-control"maxlength=5 name=kaf [(ngModel)]="orderDetailsModels.kaf">
                         
                    </div>
                    <div class="col-sm-2 form-group">
                        <label for="groupName">মহুরী </label>
                        <input type="text" class="form-control"maxlength=5 name=mohori [(ngModel)]="orderDetailsModels.mohori">
                         
                    </div>

                    <div class="col-sm-2 form-group">
                        <label for="groupName">ঘের </label>
                        <input type="text" class="form-control"maxlength=5 name=ger [(ngModel)]="orderDetailsModels.ger">
                         
                    </div>
                   
 

                </div>
                <div *ngIf="drestype == 1" class="row bg-light">
                    

                    <div class="col-sm-2 form-group">
                        <label for="groupName">লম্বা  </label>
                        <input type="text" class="form-control"maxlength=5 name=lomba [(ngModel)]="orderDetailsModels.lomba">
                         
                    </div>
                    <div class="col-sm-2 form-group">
                        <label for="groupName">কমর    </label>
                        <input type="text" class="form-control"maxlength=5 name=komor [(ngModel)]="orderDetailsModels.komor">
                         
                    </div>
                    <div class="col-sm-2 form-group">
                        <label for="groupName">হিফ   </label>
                        <input type="text" class="form-control"maxlength=5 name=hif [(ngModel)]="orderDetailsModels.hif">
                         
                    </div>
                    <div class="col-sm-2 form-group">
                        <label for="groupName">থাই    </label>
                        <input type="text" class="form-control"maxlength=5 name=thai [(ngModel)]="orderDetailsModels.thai">
                         
                    </div>
                    <div class="col-sm-2 form-group">
                        <label for="groupName">হাই   </label>
                        <input type="text" class="form-control"maxlength=5 name=hai [(ngModel)]="orderDetailsModels.hai">
                         
                    </div>
                    <div class="col-sm-2 form-group">
                        <label for="groupName">মহুরী </label>
                        <input type="text" class="form-control"maxlength=5 name=mohori [(ngModel)]="orderDetailsModels.mohori">
                         
                    </div>
                   
                   
 

                </div>
               

                    <div>
                        <hr class="dashed">
                        <label for="productName">  কাজের মডেল </label>
                    
                    </div>

                <div class="row bg-light">
                   
                    <div class="col-md-2 form-group">
                        <label>কফ_ডিসাইন</label>
                        <ng-select [(ngModel)]="orderDetailsModels.kof_design" [ngModelOptions]="{standalone: true}">
                            <ng-option *ngFor="let cof of kof_designlist" [value]="cof.names">{{cof.names}}</ng-option>
                         </ng-select>
                    </div>
                    <div class="col-md-2 form-group">
                        <label>কোলোর_ডিসাইন</label>
                        <ng-select [(ngModel)]="orderDetailsModels.kolor_design" [ngModelOptions]="{standalone: true}">
                            <ng-option *ngFor="let cof of kolor_designlist" [value]="cof.name">{{cof.name}}</ng-option>
                         </ng-select>
                    </div>

                    <div class="col-md-2 form-group">
                        <label>বাটন_ডিসাইন</label>
                        <ng-select [(ngModel)]="orderDetailsModels.button_design" [ngModelOptions]="{standalone: true}">
                            <ng-option *ngFor="let cof of button_designlist" [value]="cof.name">{{cof.name}}</ng-option>
                         </ng-select>
                    </div>

                    <div class="col-md-2 form-group">
                        <label>পকেট_ডিসাইন</label>
                        <ng-select [(ngModel)]="orderDetailsModels.poket_design" [ngModelOptions]="{standalone: true}">
                            <ng-option *ngFor="let cof of poket_designlist" [value]="cof.name">{{cof.name}}</ng-option>
                         </ng-select>
                    </div>

                    <div class="col-md-2 form-group">
                        <label>সেলাই_ডিসাইন</label>
                        <ng-select [(ngModel)]="orderDetailsModels.selay_design" [ngModelOptions]="{standalone: true}">
                            <ng-option *ngFor="let cof of selay_designlist" [value]="cof.name">{{cof.name}}</ng-option>
                         </ng-select>
                    </div>
                    <div class="col-md-2 form-group">
                        <label>চেন_ডিসাইন</label>
                        <ng-select [(ngModel)]="orderDetailsModels.chain_design" [ngModelOptions]="{standalone: true}">
                            <ng-option *ngFor="let cof of chain_designlist" [value]="cof.name">{{cof.name}}</ng-option>
                         </ng-select>
                    </div>
                </div>    

                <!-- <div class="row bg-light">

                 

                    <div class="col-md-2" *ngFor="let item of designList;let i=index;  trackBy: trackByFn | async">
                        <label>{{item.desingName}}</label>
                        <div class="form-group">
                           
                             
                            <ng-select [items]="designList[i].designSubCategoryModelList" 
                            [addTag]="true"
                            
                            [hideSelected]="true"
                            onselect="true"
                            [clearable]="true"
                            placeholder="Choose product code"
                            notFoundText="measurement code not found" 
                            bindLabel="measurement" 
                            
                            bindValue="designSubCategoryId" 
                            name=a{{i}}
                            ([ngModel])="designList[i].designSubCategoryId"
                            (change)="ngSelectOpened($event)"
                            [tracktrackmesuremnet]="tracktrackmesuremnet"
                            [ngModelOptions]="{standalone: true}"
                            required>
                            </ng-select>

 
                        </div>
                    </div>
                </div> -->
                 

                <hr class="dashed">
                <!-- <div class="row">
                   
                    <div class="form-group col-md-8">
                        <label for="productName">  কাজের মডেল </label>
                        <ng-select    bindLabel="itemModelId" placeholder="Select item" appendTo="body" multiple="true"
                            [searchable]="true" [editableSearchTerm]="true" [clearable]="true"  [(ngModel)]="itemModelId" [ngModelOptions]="{standalone: true}">
                            <ng-option [value]="item.itemModelId" [disabled]="item.disabled"
                                *ngFor="let item of itemEntityList">

                                {{item.modelName}}
                            </ng-option>
                        </ng-select>
                        

                    </div>

                </div> -->
                <div>
                    <div class="form-group col-md-10 ">
                        <label for="purchaseRate">অন্যান্য </label>

                        <textarea class="form-control" rows="2" id="comments" [(ngModel)]="comments" bindLabel="comments"   name="comments"></textarea>

                    </div>
                </div>

                <div class="row">
                    <div class="form-group mb-1 col-md-3">
                        <label class="control-label">
                            ডেলিভারী তারিখ<b class="text-danger">*</b>
                        </label>
                        <div class="input-group">
                            
                            <input type="text" class="form-control datePicker" placeholder="Select Date (DD/MM/YYYY)"
                                bsDatepicker autocomplete="off" [(ngModel)]="dDate" #dp="bsDatepicker"
                                [bsConfig]="{ dateInputFormat: 'DD/MM/YYYY' }" 
                                name="dDate" required />
                            <div class="input-group-append" data-target="#datePicker-FromDateString"
                                data-toggle="datetimepicker">
                                <div class="input-group-text">
                                    <i class="fa fa-calendar"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- <div class="form-group col-md-3 ">
                        <div class="input-group">
                            <label for="productName">ডেলিভারী তারিখ </label>
                            <span></span><span></span>
                            <input type="text" class="form-control datePicker" placeholder="Select Date (DD/MM/YYYY)"
                                bsDatepicker autocomplete="off" [(ngModel)]="dDate" #dp="bsDatepicker"
                                [bsConfig]="{ dateInputFormat: 'DD/MM/YYYY' }" 
                                name="dDate" required />
                            <div class="input-group-append" data-target="#datePicker-FromDateString"
                                data-toggle="datetimepicker">
                                <div class="input-group-text">
                                    <i class="fa fa-calendar"></i>
                                </div>
                            </div>
                        </div> -->
                      <!-- <div>
                        <label for="productName">ডেলিভারী তারিখ </label>
                        <input type="text" 
                        class="form-control datePicker" 
                        placeholder="Select Date (DD-MM-YYYY)"      
                        bsDatepicker
                        [(ngModel)]="orderModel.deliveryDate"
                        [bsConfig]="{ dateInputFormat: 'DD/MM/YYYY' }"
                        #deliveryDate="ngModel"
                        name="deliveryDate"
                        required/>
                      </div> -->
                     
                     
                        <!-- <div *ngIf="f.submitted && deliveryDate.invalid">
                                            <div *ngIf="deliveryDate.errors.required">
                                                deliveryDate is required
                                            </div>
                                            </div> -->
                    <!-- </div> -->
                    <div class="form-group col-md-2 ">
                        <label for="productName">মূল্য </label>
                        <input type="number"   class="form-control" bindLabel="orderAccountDetails.itemRate" [(ngModel)]="orderAccountDetails.itemRate" name="itemRate" />
                        <!-- <input type="text" class="form-control" name="productName" /> -->
                        <!-- <div *ngIf="f.submitted && productName.invalid">
                                            <div *ngIf="productName.errors.required">
                                                productName is required
                                            </div>
                                            </div> -->


                    </div>
                    <div class="form-group col-md-2 ">
                        <label for="productName">পরিমান </label>
                        <input type="number" class="form-control" bindLabel="orderAccountDetails.qty" (input)="getTotal()" [(ngModel)]="orderAccountDetails.qty" name="qty" />
                         
                        <!-- <div *ngIf="f.submitted && productName.invalid">
                                            <div *ngIf="productName.errors.required">
                                                productName is required
                                            </div>
                                            </div> -->
                    </div>
                    <div class="form-group col-md-5 ">
                        <label for="productName">মোটা মূল্য</label>
                        
                        <!-- <input type="number" readonly class="form-control"     bindLabel="grandTotal" [(ngModel)]="grandTotal" name="grandTotal" /> -->
                        <input style="font-size: 52px; font-weight: bold; color: red;text-align: center; background-color: white;"
                        type="text" value="{{grandTotal}}" class="form-control" readonly />
                        <!-- <div *ngIf="f.submitted && productName.invalid">
                                            <div *ngIf="productName.errors.required">
                                                productName is required
                                            </div>
                                            </div> -->
                    </div>
                   
                </div>
                <div class="form-group">
        
                    <button type="submit" class="btn btn-dark"><i class="fa fa-plus"></i> Add to List</button>
                   
                  </div>
                  <br>

            </form>


        </div>



        

    </div>

    <div>
        
        <table class="table table-borderless">
            <thead class="thead-light">
              <th>SL</th>
              <th>Product Code</th>
              <th>Product Name</th>
              <th>Qty</th>
              <th>Unit Price</th>
              <th>Total</th>
              <th>Action</th>
              <!-- <th> Grand Total = {{grandTotal}}</th> -->
            </thead>
            <tbody>
              <tr *ngIf="orderDetailList.length==0" [class.text-danger]="!isValid && orderDetailList.length==0">
                <td class="font-italic text-center" colspan="5">
                  No item selected for this order.
                </td>
              </tr>
        
              <tr *ngFor="let group of orderDetailList; let i=index;">
                <td>{{i+1}}</td>
                <td>{{group.i_id}}</td>
                <td>{{group.productName}}</td>
               
               
                <td>{{group.qty}}</td>
                <td>{{group.item_price}}</td>
                <td>{{group.qty*group.item_price}}</td>
               
                <td>
                  <a class="btn btn-sm btn-info text-white" (click)="editDatas(group,this)"><i class="fas fa-edit"></i></a>
                  <a class="btn btn-sm btn-danger text-white ml-1" (click)='deleteitem(i)' ><i class="fa fa-trash"></i></a>
                </td>
              </tr>
            </tbody>
        </table>

    </div>
    <div class="modal-footer">
        <!-- <a [routerLink]="['/orderDetails']"(click)="bsModalRef.hide()" class="nav-link"><span  class="fas fa-funnel-dollar" > <i></i>  </span>
           print</a> -->
        <button type="submit" class="btn btn-outline-success " (click)="submitOrders()">সাবমিট </button>
        <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="bsModalRef.hide()">বাতিল </button>
      </div>



      <div class="modal fade" id="myModal">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
          
            <!-- Modal Header -->
            <div class="modal-header">
              <h4 class="modal-title">Add Customer</h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            
            <!-- Modal body -->
            <form class="form-horizontal form-signin" (ngSubmit)="f.form.valid && onSaveOrUpdates(f)" #f="ngForm"
                novalidate action="index.html">

                <div class="row">
                    <div class="form-group col-md-7 ">
                        <label for="customerName">কাস্টমার নাম </label>
                        <input type="text" class="form-control" name="customerName"
                            [(ngModel)]="customer.customerName" #customerName="ngModel" />
                        <div *ngIf="f.submitted && customerName.invalid">
                            <div *ngIf="customerName.errors.required">
                                customerName is required
                            </div>
                        </div>
                    </div>
                    <div class="form-group col-md-3 ">
                        <label for="branchId">ব্রাঞ্চ   </label>
                        <input type="text" class="form-control" name="branchId"
                            [(ngModel)]="customer.branchId" #branchId="ngModel" />
                        <div *ngIf="f.submitted && branchId.invalid">
                            <div *ngIf="branchId.errors.required">
                                branchId is required
                            </div>
                        </div>
                    </div>

                </div>
                <div class="row">
                    
                      <div class="col-md-5 col-sm-6 genDiv genderTitle">
                        <div [ngClass]="{'invalid-input':f.submitted && gender.invalid}">
                          <label for="" class="col-md-4 col-sm-6 control-label text-right paddingLeft0">জেন্ডার&nbsp;*&nbsp;:</label>
                          
                          <label class="radio-inline col-md-3 p-1 col-sm-12 fontWn">
                            <input type="radio" 
                                   class="mr-1" 
                                   [(ngModel)]="customer.gender" 
                                   value="M" 
                                   name="gender"
                                   #gender="ngModel"
                                   required>
                                   <span>Male</span>
                                  </label>
                          <label class="radio-inline col-md-5 p-1 col-sm-3 fontWn">
                            <input type="radio" 
                                   class="mr-1" 
                                   [(ngModel)]="customer.gender" 
                                   value="F" 
                                   name="gender"
                                   #gender="ngModel"
                                   required>
                                   <span>Female</span>
                                  </label>
                           </div>
                      </div>
                    <div class="form-group col-md-3">
                        <label for="mobile">মোবাইল নাম্বার </label>
                        <input
                        class="form-control"
                        id=""
                        
                        type="text"
                        [(ngModel)]="customer.mobile"
                        name="mobile"
                        #mobile="ngModel"
                        (blur) ="checkUserId()"
                        required
                        />
                       
                       
                       
                        <!-- <input type="number" class="form-control" name="mobile" [(ngModel)]="customer.mobile"  (blur) ="findUserId()"
                            #mobile="ngModel" required /> -->
                        <div *ngIf="f.submitted && mobile.invalid">
                            <div *ngIf="mobile.errors.required">
                                mobile is required
                            </div>
                        </div>
                    </div>
                    <div class="form-group col-md-3">
                        <label for="address">ঠিকানা </label>
                        <input type="text" class="form-control" name="address" [(ngModel)]="customer.address"
                            #address="ngModel" required />
                        <div *ngIf="f.submitted && address.invalid">
                            <div *ngIf="address.errors.required">
                                address is required
                            </div>
                        </div>
                    </div>
                     
                </div>

                <div class="form-group">
 
                    <button type="submit" class="btn btn-dark"><i class="fa fa-plus"></i>  সেভ </button>

                </div>

            </form>
            
            <!-- Modal footer -->
            <div class="modal-footer">
              <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>
            
          </div>
        </div>
      </div>

</div>